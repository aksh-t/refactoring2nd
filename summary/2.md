# リファクタリングの定義
- リファクタリング （名詞）
  - 外部から見たときの振る舞いを保ちつつ、 理解や修正が簡単になるように、 ソフトウェアの内部構造を変化させること。

- リファクタリングする （動詞）
  - 一連のリファクタリングを適用して、外部から見た振る舞いの変更なしに、ソフトウェアを再構築すること

- **リファクタリングする （動詞）** には、複数の **リファクタリング （名詞）** が含まれる可能性がある

# 二つの帽子
- 機能追加の帽子
- リファクタリングの帽子
- 同時に行ってはいけない
- 頻繁に被り直す


# リファクタリングを行う理由
- リファクタリングはソフトウェアを改善する
- リファクタリングはソフトウェアを理解しやすくする
- リファクタリングはバグの発見を助ける
- リファクタリングはプログラミングを速める

# いつリファクタリングをすべきか
- 準備のためのリファクタリング--機能追加を用意にするために
- 理解のためのリファクタリング--コードをわかりやすくするために
- ゴミ拾いのためのリファクタリング
- 計画されたリファクタリングと、機に応じたリファクタリング
- 長期のリファクタリング
- コードレビュー時のリファクタリング
- 管理者を説得するには
- リファクタリングを避ける時

# リファクタリングの問題点
- 新機能の実装が遅くなる
  - リファクタリングはそもそも開発速度を上げるための手法
  - リファクタリングのし過ぎよりも、不十分なことが大半
- コードの所有権
  - コードの所有権が分かれていると、リファクタリングの障壁になる可能性がある
- ブランチ
  - 機能ブランチからメインブランチへの統合が長い期間行われないと、リファクタリングが難しくなる
  - 頻繁に統合が行われる継続的インテグレーションが良い
- テスト
  - 十分な事故テストがないと、リファクタリングできる内容が限定されることがある
- レガシーコード
- データベース
  - 以前はリファクタリングするのが難しい分野だったが、今は手法が整っている

# リファクタリングとアーキテクチャ、そして Yagni
- 一度書いたコードは変更しない → 既存のコードを改善していく
- リファクタリングは、要求の変化にしなやかに対応できる、すぐれた設計のコードベースを作り上げる方法を示した
- Yagni

# リファクタリングとソフトウェア開発プロセス
- 開発プロセスの多くは、リファクタリングが通常の作業の一部になることに適合する必要がある
- 自己テストコード、CIも同様
- 上記の3つのプラクティスは強い相乗効果がある
- さらにYagniとも相互に補完し合う
- これらのプラクティスがきちんと実践できていれば、アジャイル開発手法の他の要素も活用できる（cf. 継続的デリバリ）

# リファクタリングとパフォーマンス
- リファクタリンはバフォーマンスを低くする
- 一方で、パフォーマンスチューニングしやすい形にする
- 最初にチューニングしやすく作って、十分な速度が出るまで、段階的にチューニングするのが良い

# リファクタリングの起源
# 自動化されたリファクタリング
# さらに興味のある方へ
